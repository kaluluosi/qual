# 2023年9月20日

## XYSSO接入FastAPI/OpenAPI OAuth2AuthorizationCodeBearer总结

之前提到过`XYSSO`本质上是`OAuth2`的授权码登录。那么按道理应该可以使用`OAuth2AuthorizationCodeBearer`来接入。
同时也能够兼容`OpenAPI`的认证工具。

实际实践下来，初步成功的实现了`XYSSO`的`OAuth2AuthorizationCodeBearer`。但是还有一些瑕疵。

`OpenAPI/Swagger`的认证工具对授权码认证的支持还不足。虽然`OAuth2AuthorizationCodeBearer`有`refreshUrl`这个参数，这个参数
是用来配置`令牌刷新接口`供`OpenAPI/Swagger`在令牌失效的时候或快失效的时候来刷新令牌的。但是`OpenAPI/Swagger`的认证工具目前还不支持`refreshUrl`。

相关ISSUE：
[Automatic token refresh for REST API with OpenID Connect authentication?](https://github.com/swagger-api/swagger-ui/issues/7257)

也就是说我们在 `OpenAPI/Swagger` 中无法做到自动刷新令牌，只能在`.env`中在开发模式下将`JWT_EXPIRE_MINUTES`的过期时间设置的更长一点。